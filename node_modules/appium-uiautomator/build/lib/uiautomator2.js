'use strict';

var _get = require('babel-runtime/helpers/get')['default'];

var _inherits = require('babel-runtime/helpers/inherits')['default'];

var _createClass = require('babel-runtime/helpers/create-class')['default'];

var _classCallCheck = require('babel-runtime/helpers/class-call-check')['default'];

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

Object.defineProperty(exports, '__esModule', {
    value: true
});

var _events = require('events');

var _events2 = _interopRequireDefault(_events);

var _appiumSupport = require('appium-support');

var log = _appiumSupport.logger.getLogger('TestBundle_Process');

var startDetector = function startDetector(s) {
    return (/com\.boyaa\.application\.testbundle\.TestBundle/.test(s)
    );
};

var UiAutomator_Test = (function (_events$EventEmitter) {
    _inherits(UiAutomator_Test, _events$EventEmitter);

    function UiAutomator_Test(adb) {
        _classCallCheck(this, UiAutomator_Test);

        if (!adb) {
            log.errorAndThrow("adb is required to instantiate UiAutomator");
        }
        _get(Object.getPrototypeOf(UiAutomator_Test.prototype), 'constructor', this).call(this);
        this.adb = adb;
    }

    // AppiumBootstrap.jar
    // io.appium.android.bootstrap.Bootstrap

    _createClass(UiAutomator_Test, [{
        key: 'start',
        value: function start() {
            var processIsAlive, args;
            return _regeneratorRuntime.async(function start$(context$2$0) {
                var _this = this;

                while (1) switch (context$2$0.prev = context$2$0.next) {
                    case 0:
                        processIsAlive = undefined;
                        context$2$0.prev = 1;

                        log.debug("Starting testbundle");
                        this.changeState(UiAutomator_Test.STATE_STARTING);

                        // killing any uiautomator existing processes
                        context$2$0.next = 6;
                        return _regeneratorRuntime.awrap(this.killUiAutomator2OnDevice());

                    case 6:

                        log.debug('Starting testbundle');
                        args = ['shell', 'am', 'instrument', '-w', '-e', 'class', 'com.boyaa.application.testbundle.TestBundle#test_RunServer', 'com.boyaa.application.testbundle/android.test.InstrumentationTestRunner'];

                        // 只是初始化，只有调用start的时候，才会spawn
                        this.proc = this.adb.createSubProcess(args);

                        // handle out-of-bound exit by simply emitting a stopped state
                        this.proc.on('exit', function (code, signal) {
                            processIsAlive = false;
                            // cleanup
                            if (_this.state !== UiAutomator_Test.STATE_STOPPED && _this.state !== UiAutomator_Test.STATE_STOPPING) {
                                var msg = 'testbundle process exited unexpectedly with code ' + code + ', ' + ('signal ' + signal);
                                log.error(msg);
                            } else if (_this.state === UiAutomator_Test.STATE_STOPPING) {
                                log.debug("testbundle shut down normally");
                            }
                            _this.changeState(UiAutomator_Test.STATE_STOPPED);
                        });

                        context$2$0.next = 12;
                        return _regeneratorRuntime.awrap(this.proc.start(startDetector));

                    case 12:
                        processIsAlive = true;
                        this.changeState(UiAutomator_Test.STATE_ONLINE);
                        return context$2$0.abrupt('return', this.proc);

                    case 17:
                        context$2$0.prev = 17;
                        context$2$0.t0 = context$2$0['catch'](1);

                        this.emit(UiAutomator_Test.EVENT_ERROR, context$2$0.t0);

                        if (!processIsAlive) {
                            context$2$0.next = 25;
                            break;
                        }

                        context$2$0.next = 23;
                        return _regeneratorRuntime.awrap(this.killUiAutomator2OnDevice());

                    case 23:
                        context$2$0.next = 25;
                        return _regeneratorRuntime.awrap(this.proc.stop());

                    case 25:
                        log.errorAndThrow(context$2$0.t0);

                    case 26:
                    case 'end':
                        return context$2$0.stop();
                }
            }, null, this, [[1, 17]]);
        }
    }, {
        key: 'shutdown',
        value: function shutdown() {
            return _regeneratorRuntime.async(function shutdown$(context$2$0) {
                while (1) switch (context$2$0.prev = context$2$0.next) {
                    case 0:
                        log.debug('Shutting down testbundle');
                        this.changeState(UiAutomator_Test.STATE_STOPPING);
                        context$2$0.prev = 2;
                        context$2$0.next = 5;
                        return _regeneratorRuntime.awrap(this.proc.stop());

                    case 5:
                        context$2$0.next = 9;
                        break;

                    case 7:
                        context$2$0.prev = 7;
                        context$2$0.t0 = context$2$0['catch'](2);

                    case 9:
                    case 'end':
                        return context$2$0.stop();
                }
            }, null, this, [[2, 7]]);
        }
    }, {
        key: 'changeState',

        //await this.killUiAutomator2OnDevice();
        //this.changeState(UiAutomator_Test.STATE_STOPPED);
        value: function changeState(state) {
            log.debug('Moving to state \'' + state + '\'');
            this.state = state;
            this.emit(UiAutomator_Test.EVENT_CHANGED, { state: state });
        }
    }, {
        key: 'killUiAutomator2OnDevice',
        value: function killUiAutomator2OnDevice() {
            return _regeneratorRuntime.async(function killUiAutomator2OnDevice$(context$2$0) {
                while (1) switch (context$2$0.prev = context$2$0.next) {
                    case 0:
                        context$2$0.prev = 0;
                        context$2$0.next = 3;
                        return _regeneratorRuntime.awrap(this.adb.killProcessesByName('enginedlqp'));

                    case 3:
                        context$2$0.next = 8;
                        break;

                    case 5:
                        context$2$0.prev = 5;
                        context$2$0.t0 = context$2$0['catch'](0);

                        log.warn('Error while killing uiAutomator: ' + context$2$0.t0);

                    case 8:
                    case 'end':
                        return context$2$0.stop();
                }
            }, null, this, [[0, 5]]);
        }
    }]);

    return UiAutomator_Test;
})(_events2['default'].EventEmitter);

UiAutomator_Test.EVENT_ERROR = 'uiautomator_error';
UiAutomator_Test.EVENT_CHANGED = 'stateChanged';
UiAutomator_Test.STATE_STOPPED = 'stopped';
UiAutomator_Test.STATE_STARTING = 'starting';
UiAutomator_Test.STATE_ONLINE = 'online';
UiAutomator_Test.STATE_STOPPING = 'stopping';

exports['default'] = UiAutomator_Test;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi91aWF1dG9tYXRvcjIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O3NCQUFtQixRQUFROzs7OzZCQUNKLGdCQUFnQjs7QUFHdkMsSUFBTSxHQUFHLEdBQUcsc0JBQU8sU0FBUyxDQUFDLG9CQUFvQixDQUFDLENBQUM7O0FBR25ELElBQU0sYUFBYSxHQUFHLFNBQWhCLGFBQWEsQ0FBSSxDQUFDLEVBQUs7QUFBRSxXQUFPLGtEQUFpRCxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7TUFBQztDQUFFLENBQUM7O0lBRTdGLGdCQUFnQjtjQUFoQixnQkFBZ0I7O0FBQ04sYUFEVixnQkFBZ0IsQ0FDTCxHQUFHLEVBQUU7OEJBRGhCLGdCQUFnQjs7QUFFZCxZQUFJLENBQUMsR0FBRyxFQUFFO0FBQ04sZUFBRyxDQUFDLGFBQWEsQ0FBQyw0Q0FBNEMsQ0FBQyxDQUFDO1NBQ25FO0FBQ0QsbUNBTEYsZ0JBQWdCLDZDQUtOO0FBQ1IsWUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7S0FFbEI7Ozs7O2lCQVJDLGdCQUFnQjs7ZUFZTjtnQkFDSixjQUFjLEVBU1YsSUFBSTs7Ozs7O0FBVFIsc0NBQWM7OztBQUVkLDJCQUFHLENBQUMsS0FBSyxDQUFDLHFCQUFxQixDQUFDLENBQUM7QUFDakMsNEJBQUksQ0FBQyxXQUFXLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxDQUFDLENBQUM7Ozs7eURBRzVDLElBQUksQ0FBQyx3QkFBd0IsRUFBRTs7OztBQUVyQywyQkFBRyxDQUFDLEtBQUssQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO0FBQzdCLDRCQUFJLEdBQUcsQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSw0REFBNEQsRUFDdEgseUVBQXlFLENBQUM7OztBQUc5RSw0QkFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDOzs7QUFHNUMsNEJBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxVQUFDLElBQUksRUFBRSxNQUFNLEVBQUs7QUFDbkMsMENBQWMsR0FBRyxLQUFLLENBQUM7O0FBRXZCLGdDQUFJLE1BQUssS0FBSyxLQUFLLGdCQUFnQixDQUFDLGFBQWEsSUFDN0MsTUFBSyxLQUFLLEtBQUssZ0JBQWdCLENBQUMsY0FBYyxFQUFFO0FBQ2hELG9DQUFJLEdBQUcsR0FBRyxzREFBb0QsSUFBSSx1QkFDcEQsTUFBTSxDQUFFLENBQUM7QUFDdkIsbUNBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7NkJBQ2xCLE1BQU0sSUFBSSxNQUFLLEtBQUssS0FBSyxnQkFBZ0IsQ0FBQyxjQUFjLEVBQUU7QUFDdkQsbUNBQUcsQ0FBQyxLQUFLLENBQUMsK0JBQStCLENBQUMsQ0FBQzs2QkFDOUM7QUFDRCxrQ0FBSyxXQUFXLENBQUMsZ0JBQWdCLENBQUMsYUFBYSxDQUFDLENBQUM7eUJBQ3BELENBQUMsQ0FBQzs7O3lEQUVHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQzs7O0FBQ3BDLHNDQUFjLEdBQUcsSUFBSSxDQUFDO0FBQ3RCLDRCQUFJLENBQUMsV0FBVyxDQUFDLGdCQUFnQixDQUFDLFlBQVksQ0FBQyxDQUFDOzREQUN6QyxJQUFJLENBQUMsSUFBSTs7Ozs7O0FBRWhCLDRCQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFdBQVcsaUJBQUksQ0FBQzs7NkJBQ3ZDLGNBQWM7Ozs7Ozt5REFDUixJQUFJLENBQUMsd0JBQXdCLEVBQUU7Ozs7eURBQy9CLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFOzs7QUFFMUIsMkJBQUcsQ0FBQyxhQUFhLGdCQUFHLENBQUM7Ozs7Ozs7U0FFNUI7OztlQUVjOzs7O0FBQ1gsMkJBQUcsQ0FBQyxLQUFLLENBQUMsMEJBQTBCLENBQUMsQ0FBQztBQUN0Qyw0QkFBSSxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxjQUFjLENBQUMsQ0FBQzs7O3lEQUV4QyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRTs7Ozs7Ozs7Ozs7Ozs7O1NBTTdCOzs7Ozs7ZUFHVyxxQkFBQyxLQUFLLEVBQUU7QUFDaEIsZUFBRyxDQUFDLEtBQUssd0JBQXFCLEtBQUssUUFBSSxDQUFDO0FBQ3hDLGdCQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztBQUNuQixnQkFBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxhQUFhLEVBQUUsRUFBQyxLQUFLLEVBQUwsS0FBSyxFQUFDLENBQUMsQ0FBQztTQUN0RDs7O2VBRThCOzs7Ozs7eURBRWpCLElBQUksQ0FBQyxHQUFHLENBQUMsbUJBQW1CLENBQUMsWUFBWSxDQUFDOzs7Ozs7Ozs7O0FBRWhELDJCQUFHLENBQUMsSUFBSSxzREFBeUMsQ0FBQzs7Ozs7OztTQUV6RDs7O1dBbEZDLGdCQUFnQjtHQUFTLG9CQUFPLFlBQVk7O0FBc0ZsRCxnQkFBZ0IsQ0FBQyxXQUFXLEdBQUcsbUJBQW1CLENBQUM7QUFDbkQsZ0JBQWdCLENBQUMsYUFBYSxHQUFHLGNBQWMsQ0FBQztBQUNoRCxnQkFBZ0IsQ0FBQyxhQUFhLEdBQUcsU0FBUyxDQUFDO0FBQzNDLGdCQUFnQixDQUFDLGNBQWMsR0FBRyxVQUFVLENBQUM7QUFDN0MsZ0JBQWdCLENBQUMsWUFBWSxHQUFHLFFBQVEsQ0FBQztBQUN6QyxnQkFBZ0IsQ0FBQyxjQUFjLEdBQUcsVUFBVSxDQUFDOztxQkFFOUIsZ0JBQWdCIiwiZmlsZSI6ImxpYi91aWF1dG9tYXRvcjIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXZlbnRzIGZyb20gJ2V2ZW50cyc7XHJcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ2FwcGl1bS1zdXBwb3J0JztcclxuXHJcblxyXG5jb25zdCBsb2cgPSBsb2dnZXIuZ2V0TG9nZ2VyKCdUZXN0QnVuZGxlX1Byb2Nlc3MnKTtcclxuXHJcblxyXG5jb25zdCBzdGFydERldGVjdG9yID0gKHMpID0+IHsgcmV0dXJuIC9jb21cXC5ib3lhYVxcLmFwcGxpY2F0aW9uXFwudGVzdGJ1bmRsZVxcLlRlc3RCdW5kbGUvLnRlc3Qocyk7IH07XHJcblxyXG5jbGFzcyBVaUF1dG9tYXRvcl9UZXN0IGV4dGVuZHMgZXZlbnRzLkV2ZW50RW1pdHRlciB7XHJcbiAgICBjb25zdHJ1Y3RvciAoYWRiKSB7XHJcbiAgICAgICAgaWYgKCFhZGIpIHtcclxuICAgICAgICAgICAgbG9nLmVycm9yQW5kVGhyb3coXCJhZGIgaXMgcmVxdWlyZWQgdG8gaW5zdGFudGlhdGUgVWlBdXRvbWF0b3JcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5hZGIgPSBhZGI7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8vIEFwcGl1bUJvb3RzdHJhcC5qYXJcclxuICAgIC8vIGlvLmFwcGl1bS5hbmRyb2lkLmJvb3RzdHJhcC5Cb290c3RyYXBcclxuICAgIGFzeW5jIHN0YXJ0ICgpIHtcclxuICAgICAgICBsZXQgcHJvY2Vzc0lzQWxpdmU7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbG9nLmRlYnVnKFwiU3RhcnRpbmcgdGVzdGJ1bmRsZVwiKTtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VTdGF0ZShVaUF1dG9tYXRvcl9UZXN0LlNUQVRFX1NUQVJUSU5HKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGtpbGxpbmcgYW55IHVpYXV0b21hdG9yIGV4aXN0aW5nIHByb2Nlc3Nlc1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmtpbGxVaUF1dG9tYXRvcjJPbkRldmljZSgpO1xyXG5cclxuICAgICAgICAgICAgbG9nLmRlYnVnKCdTdGFydGluZyB0ZXN0YnVuZGxlJyk7XHJcbiAgICAgICAgICAgIGxldCBhcmdzID0gWydzaGVsbCcsICdhbScsICdpbnN0cnVtZW50JywgJy13JywgJy1lJywgJ2NsYXNzJywgJ2NvbS5ib3lhYS5hcHBsaWNhdGlvbi50ZXN0YnVuZGxlLlRlc3RCdW5kbGUjdGVzdF9SdW5TZXJ2ZXInLFxyXG4gICAgICAgICAgICAgICAgJ2NvbS5ib3lhYS5hcHBsaWNhdGlvbi50ZXN0YnVuZGxlL2FuZHJvaWQudGVzdC5JbnN0cnVtZW50YXRpb25UZXN0UnVubmVyJ11cclxuXHJcbiAgICAgICAgICAgIC8vIOWPquaYr+WIneWni+WMlu+8jOWPquacieiwg+eUqHN0YXJ055qE5pe25YCZ77yM5omN5Lyac3Bhd25cclxuICAgICAgICAgICAgdGhpcy5wcm9jID0gdGhpcy5hZGIuY3JlYXRlU3ViUHJvY2VzcyhhcmdzKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGhhbmRsZSBvdXQtb2YtYm91bmQgZXhpdCBieSBzaW1wbHkgZW1pdHRpbmcgYSBzdG9wcGVkIHN0YXRlXHJcbiAgICAgICAgICAgIHRoaXMucHJvYy5vbignZXhpdCcsIChjb2RlLCBzaWduYWwpID0+IHtcclxuICAgICAgICAgICAgICAgIHByb2Nlc3NJc0FsaXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAvLyBjbGVhbnVwXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gVWlBdXRvbWF0b3JfVGVzdC5TVEFURV9TVE9QUEVEICYmXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSAhPT0gVWlBdXRvbWF0b3JfVGVzdC5TVEFURV9TVE9QUElORykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBtc2cgPSBgdGVzdGJ1bmRsZSBwcm9jZXNzIGV4aXRlZCB1bmV4cGVjdGVkbHkgd2l0aCBjb2RlICR7Y29kZX0sIGAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBgc2lnbmFsICR7c2lnbmFsfWA7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nLmVycm9yKG1zZyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUgPT09IFVpQXV0b21hdG9yX1Rlc3QuU1RBVEVfU1RPUFBJTkcpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcoXCJ0ZXN0YnVuZGxlIHNodXQgZG93biBub3JtYWxseVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlU3RhdGUoVWlBdXRvbWF0b3JfVGVzdC5TVEFURV9TVE9QUEVEKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnByb2Muc3RhcnQoc3RhcnREZXRlY3Rvcik7XHJcbiAgICAgICAgICAgIHByb2Nlc3NJc0FsaXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VTdGF0ZShVaUF1dG9tYXRvcl9UZXN0LlNUQVRFX09OTElORSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb2M7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aGlzLmVtaXQoVWlBdXRvbWF0b3JfVGVzdC5FVkVOVF9FUlJPUiwgZSk7XHJcbiAgICAgICAgICAgIGlmIChwcm9jZXNzSXNBbGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5raWxsVWlBdXRvbWF0b3IyT25EZXZpY2UoKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucHJvYy5zdG9wKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbG9nLmVycm9yQW5kVGhyb3coZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNodXRkb3duICgpIHtcclxuICAgICAgICBsb2cuZGVidWcoJ1NodXR0aW5nIGRvd24gdGVzdGJ1bmRsZScpO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlU3RhdGUoVWlBdXRvbWF0b3JfVGVzdC5TVEFURV9TVE9QUElORyk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wcm9jLnN0b3AoKTtcclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vYXdhaXQgdGhpcy5raWxsVWlBdXRvbWF0b3IyT25EZXZpY2UoKTtcclxuICAgICAgICAvL3RoaXMuY2hhbmdlU3RhdGUoVWlBdXRvbWF0b3JfVGVzdC5TVEFURV9TVE9QUEVEKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgY2hhbmdlU3RhdGUgKHN0YXRlKSB7XHJcbiAgICAgICAgbG9nLmRlYnVnKGBNb3ZpbmcgdG8gc3RhdGUgJyR7c3RhdGV9J2ApO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcclxuICAgICAgICB0aGlzLmVtaXQoVWlBdXRvbWF0b3JfVGVzdC5FVkVOVF9DSEFOR0VELCB7c3RhdGV9KTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBraWxsVWlBdXRvbWF0b3IyT25EZXZpY2UgKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRiLmtpbGxQcm9jZXNzZXNCeU5hbWUoJ2VuZ2luZWRscXAnKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGxvZy53YXJuKGBFcnJvciB3aGlsZSBraWxsaW5nIHVpQXV0b21hdG9yOiAke2V9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuVWlBdXRvbWF0b3JfVGVzdC5FVkVOVF9FUlJPUiA9ICd1aWF1dG9tYXRvcl9lcnJvcic7XHJcblVpQXV0b21hdG9yX1Rlc3QuRVZFTlRfQ0hBTkdFRCA9ICdzdGF0ZUNoYW5nZWQnO1xyXG5VaUF1dG9tYXRvcl9UZXN0LlNUQVRFX1NUT1BQRUQgPSAnc3RvcHBlZCc7XHJcblVpQXV0b21hdG9yX1Rlc3QuU1RBVEVfU1RBUlRJTkcgPSAnc3RhcnRpbmcnO1xyXG5VaUF1dG9tYXRvcl9UZXN0LlNUQVRFX09OTElORSA9ICdvbmxpbmUnO1xyXG5VaUF1dG9tYXRvcl9UZXN0LlNUQVRFX1NUT1BQSU5HID0gJ3N0b3BwaW5nJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFVpQXV0b21hdG9yX1Rlc3Q7XHJcbiJdLCJzb3VyY2VSb290IjoiLi5cXC4uIn0=
